# ==============================================================================
# Filename:       install_gemini.yml
# Version:        1.1
# Author:         Gemini CLI
# Last Modified:  2026-01-26
# Context:        http://trac.gafla.us.com/ticket/2802
#
# Purpose:
#   Provisions desktops with the Gemini CLI using the 'gemini_cli' role.
#   Configures Node.js/NPM, installs the CLI package, and sets the API key
#   via a persistent environment variable (bashrc).
#
# Dependencies:
#   - role: gemini_cli
#   - vault.yml (for gemini_api_key)
# ==============================================================================

- name: Install Google Gemini CLI
  hosts: desktops        # Targets your newly renamed [desktops] group
  gather_facts: true     # Required for the role to detect OS version
  become: true           # Required to install Node.js and global NPM packages
  vars_files: [../vault.yml]

  roles:
    - role: gemini_cli
      # The role defaults to user 'will'. If 'venus' uses a different user,
      # uncomment the next line and change it:
      # vars:
      #   gemini_cli_config_user: 'your_username'
