# ==============================================================================
# Filename:       roles/backup_manager/templates/jobs.cfg.j2
# Version:        1.0
# Author:         Gemini CLI
# Last Modified:  2026-02-02
# Context:        http://trac.home.arpa/ticket/3008
#
# Purpose:
#    Jinja2 template for Proxmox /etc/pve/jobs.cfg
# ==============================================================================
# Ansible Managed File - Do Not Edit Manually

{% for job in proxmox_backup_jobs %}
{% if job.node is not defined or job.node == inventory_hostname %}
vzdump: {{ job.id | default((job.name | default('uuid-' ~ (job.vmid | string))) | to_uuid) }}
    schedule {{ job.schedule }}
    enabled {{ 1 if job.enabled | default(true) else 0 }}
    mode {{ job.mode | default('snapshot') }}
    storage {{ job.storage }}
    vmid {{ job.vmid }}
{% if job.notes_template is defined %}
    notes-template {{ job.notes_template }}
{% endif %}
{% if job.mailto is defined %}
    mailto {{ job.mailto }}
{% endif %}
{% if job.mailnotification is defined %}
    mailnotification {{ job.mailnotification }}
{% endif %}
{% if job.compress is defined %}
    compress {{ job.compress }}
{% endif %}

{% endif %}
{% endfor %}
