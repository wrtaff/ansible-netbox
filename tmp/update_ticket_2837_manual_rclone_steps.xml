<?xml version="1.0"?>
<methodCall>
  <methodName>ticket.update</methodName>
  <params>
    <param><i4>2837</i4></param>
    <param><string>&#10;The `google_drive_mount` Ansible role and `mount_google_drive.yml` playbook have been created to automate the mounting of a user's Google Drive to `~/gDrive`.&#10;&#10;=== Role: `google_drive_mount` ===&#10;This role performs the following actions:&#10;*   Installs the `rclone` package.&#10;*   Creates the `~/gDrive` mount point.&#10;*   Deploys a pre-configured `rclone.conf` file to `~/.config/rclone/rclone.conf`.&#10;*   Deploys a systemd user service file to `~/.config/systemd/user/gdrive-rclone.service` to make the mount persistent.&#10;*   Enables and starts the systemd user service.&#10;&#10;=== Playbook: `mount_google_drive.yml` ===&#10;This playbook applies the `google_drive_mount` role to the `[desktops]` group, targeting the `will` user.&#10;&#10;=== Usage ===&#10;To apply the Google Drive mount to a desktop, ensure the host is in the `[desktops]` group in the `inventory.ini` file, and then run:&#10;`ansible-playbook playbooks/mount_google_drive.yml -i inventory.ini --limit &lt;target_host&gt;`&#10;&#10;The playbook has been successfully tested on `venus`.&#10;&#10;=== Manual rclone Re-authentication and Troubleshooting for will-gDrive ===&#10;&#10;Recent attempts to start the Google Drive mount on `venus` failed due to an &quot;invalid_grant&quot; error from Google, indicating an expired or invalid `rclone` token/client credentials. Ansible automation proved insufficient to resolve the underlying authentication issue directly.&#10;&#10;The following manual steps are required to re-authenticate `rclone` using its default, valid credentials, and then deploy the corrected service file.&#10;&#10;'''Step 1: Re-authenticate rclone on `zeus` (your working instance)'''&#10;&#10;Follow these steps precisely on `zeus` via your SSH terminal:&#10;{{{
&#10;rclone config&#10;}}}
1.  Choose '''d''' for &quot;Delete remote&quot;.&#10;2.  When asked &quot;Name of remote to delete?&quot;, enter '''will-gDrive''' and press Enter.&#10;&#10;3.  Choose '''n''' for &quot;New remote&quot;.&#10;4.  For the name, enter '''will-gDrive'''.&#10;5.  For &quot;Type of storage to configure,&quot; find &quot;Google Drive&quot; and enter the corresponding number (e.g., '''drive''').&#10;&#10;6.  '''CRITICAL STEP:'''&#10;    *   When prompted for `&quot;client_id&quot;`, '''leave it blank and press Enter'''.&#10;    *   When prompted for `&quot;client_secret&quot;`, '''leave it blank and press Enter'''.&#10;    *   '''This forces rclone to use its own valid shared credentials.'''&#10;&#10;7.  Complete the setup:&#10;    *   For &quot;Scope,&quot; choose '''1''' for full access.&#10;    *   Leave &quot;root_folder_id&quot; and &quot;service_account_file&quot; blank (press Enter for both).&#10;    *   For &quot;Edit advanced config?&quot;, choose '''n'''.&#10;    *   For &quot;Use auto config?&quot;, '''choose n''' (since you are on a remote machine).&#10;&#10;8.  Authorize rclone:&#10;    *   `rclone` will display a URL. '''Copy this URL'''.&#10;    *   Paste it into a browser on your '''local computer''' (the machine you are physically using).&#10;    *   Log in to your Google account and grant the permissions.&#10;    *   Google will give you a '''verification code'''. '''Copy it'''.&#10;    *   Paste the code back into your `zeus` terminal.&#10;&#10;9.  Finalize:&#10;    *   For &quot;Configure this as a team drive?&quot;, choose '''n'''.&#10;    *   Choose '''y''' to save the new remote.&#10;    *   Choose '''q''' to quit the configuration.&#10;&#10;--&#10;&#10;After you have successfully created this new, working configuration on `zeus`:&#10;&#10;'''Step 2: Copy the new rclone.conf from `zeus` to `venus`'''&#10;&#10;After successfully creating the new configuration on `zeus`, copy the content of `/home/will/.config/rclone/rclone.conf` from `zeus`.&#10;&#10;Then, use that content to '''overwrite''' the file at `/home/will/.config/rclone/rclone.conf` on `venus`.&#10;{{{
&#10;# Example of how you might copy it if you can use scp (replace with your actual method)&#10;scp /home/will/.config/rclone/rclone.conf will@venus.home.arpa:/home/will/.config/rclone/rclone.conf&#10;# Ensure permissions are correct if copied manually&#10;ssh will@venus.home.arpa &quot;chmod 600 /home/will/.config/rclone/rclone.conf&quot;&#10;}}}
&#10;'''Step 3: Restart the Google Drive systemd service on `venus`'''&#10;&#10;On `venus`, run these commands:&#10;{{{
&#10;sudo systemctl daemon-reload&#10;sudo systemctl restart gdrive-rclone.service&#10;}}}
&#10;'''Step 4: Verify the mount on `venus`'''&#10;&#10;Check if the `~/gDrive` directory exists and has content:&#10;{{{
&#10;ls -l /home/will/gDrive&#10;}}}
</string></param>
    <param><struct><member><name>author</name><value><string>gemini</string></value></member></struct></param>
    <param><boolean>1</boolean></param>
  </params>
</methodCall>
